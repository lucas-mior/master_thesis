% https://github.com/SublimeText/LaTeXTools/issues/1439
%!TEX output_directory=latexcache

% You can build this using the command:
% latexmk -pdf -jobname=output \
% -output-directory=. -aux-directory=. \
% -pdflatex="pdflatex -interaction=nonstopmode" -use-make \
% main.tex

% When the bibliography includes a cyclic reference to another bibliography,
% you need to run `pdflatex` 5 times on the following order:
% 1. `pdflatex`,
% 2. `biber`,
% 3. `pdflatex`
% 4. `pdflatex`
% 5. `pdflatex`
% 6. `biber`
% 7. `pdflatex`

% Monograph LaTeX Template for UFSC based on:
% 1. https://github.com/royertiago/tcc
% 2. http://portal.bu.ufsc.br/normalizacao/
% 3. https://github.com/evandrocoan/ufscthesisx
% 4. http://www.latextemplates.com/template/simple-sectioned-essay

% Initially translated from Portuguese with help of
% https://github.com/omegat-org/omegat
% q/computer-assisted-translation-of-latex-document

% Allows you to write your thesis both in English and Portuguese
% q/is-it-possible-to-keep-my-translation-together-with-original-text
\newif\ifenglish\englishfalse
\newif\ifadvisor\advisorfalse

% Uncomment `\englishtrue` to set the document default language to English
% \englishtrue
\advisortrue

% q/how-to-expand-ifthenelse-so-that-it-can-be-used-in-parshape
\newcommand{\lang}[2]{\ifenglish#1\else#2\fi}
\newcommand{\advisor}[2]{\ifadvisor#1\else#2\fi}

% q/how-to-make-passoptionstopackage-add-the-option-as-the-last
% q/changing-the-cleveref-package-language-conjunction-definition
% q/why-isnt-my-biblatex-language-changing-when-passing-the-language-on-my-document
\ifenglish
    \PassOptionsToPackage{brazil,main=english}{babel}
\else
    \PassOptionsToPackage{main=brazil,english}{babel}
\fi

% Simple alias for English and Portuguese words
% q/argument-of-bbltempd-has-an-extra
\newcommand{\brazilword}[1]{\protect\foreignlanguage{brazil}{#1}}
\newcommand{\englishword}[1]{\protect\foreignlanguage{english}{#1}}

% Allow you to write `Evandro's house` in latex as `Evandro\s house` instead of
% `Evandro\textquotesingle{}s house`
% q/space-after-latex-commands
\newcommand{\s}[0]{\textquotesingle{}s\xspace}
\newcommand{\q}[0]{\textquotesingle{}\xspace}

% Uncomment the following line if you want to use other biblatex settings
% \PassOptionsToPackage{style=numeric,
%                       repeatfields=true,
%                       backend=biber,
%                       backref=true,
%                       citecounter=true}{biblatex}
\documentclass[
% q/changing-the-cleveref-package-language-conjunction-definition
\lang{english}{brazilian,brazil},
12pt, % Padrão UFSC para versão final
a4paper, % Padrão UFSC para versão final
oneside, % Impressão nos dois lados da folha
chapter=TITLE, % Título de capítulos em caixa alta
section=TITLE, % Título de seções em caixa alta
]{setup/ufscthesisx}

% Utilize o arquivo references.bib para incluir sua bibliografia.
% http://tug.ctan.org/tex-archive/macros/latex/contrib/cleveref/cleveref.pdf
\addbibresource{references.bib}

% https://www.overleaf.com/learn/latex/Inserting_Images
\graphicspath{{fig/}}

% FIXME: Preencha com seus dados
\autor{\brazilword{Escreva aqui o Nome completo do Autor ou da Autora}}
\titulo{
  \lang{Work Title\protect\\Could be break into two lines}
       {Título do trabalho\protect\\Pode ser Quebrado em duas linhas}
}

% FIXME: Se houver subtítulo, descomente a linha abaixo
\subtitulo{\lang{Subtitle}{Subtítulo}}

% FIXME: Siglas para grau de formação
% Dr./Dra., Me./Ma, Bel. Bela. (inglês: PhD., MSc., Bs.)
\orientador[\lang{Supervisor}{Orientador(a)}]
{\brazilword{Nome completo do Orientador(a)}, \lang{Phd.}{Dr.}}

% FIXME: Se houver coorientador, descomente a linha abaixo
% \coorientador[\lang{Co-supervisor}{Coorientador(a)}]
% {\brazilword{Nome do coorientador(a)}, \lang{Phd.}{Dr.}}

% FIXME: Preencher com o nome do Coordenador de TCCs/Teses do seu curso
\coordenador[\lang{Coordinator}{Coordenador(a)}]
{\brazilword{Nome do Coordenador(a)}, \lang{Phd.}{Dr.}}

% FIXME: Local da sua defesa
\local{\brazilword{Florianópolis, Santa Catarina} -- \lang{Brazil}{Brasil}}

% FIXME: Ano da sua defesa
\ano{2019}
\biblioteca{\lang{University Library}{Biblioteca Universitária}}

% FIXME: Sigla da sua instituição
\instituicaosigla{UFSC}
\instituicao{\brazilword{Universidade Federal de Santa Catarina}}

% FIXME: Preencha com 
% Tese, Dissertação, Trabalho de Conclusão de Curso, Bachelor's Thesis, etc
\tipotrabalho{\lang{Bachelor\s Thesis}{Trabalho de Conclusão de Curso}}

% FIXME: Se houver Área de Concentração, descomente a linha abaixo
% \area{\lang{Formal Languages}{Linguagens Formais}}

% FIXME: Preencha com Doutor, Bacharel ou Mestrando
\formacao{\lang
    {Bachelor of Science degree in Computer Science}
    {Bacharel em Ciências da Computação}%
}
\programa{\lang
    {Undergraduate Program in Computer Science}
    {Programa de Graduação em Ciências da Computação}%
}

% FIXME: Preencha com Departamento de XXXXXX, Centro de XXXXXX
\centro{\lang
    {INE -- Department of Informatics and Statistics, CTC -- Technological
     Center}
    {INE -- Departamento de Informática e Estatística, CTC -- Centro
     Tecnológico}%
}

% FIXME: Preencha com Campus XXXXXX     ou     Centro de XXXXXX
\campus{\brazilword{Campus Reitor João David Ferreira Lima}}

% FIXME: Data da sua defesa
\data{\lang{30 of march of}{30 de março de} 2019}

% O preambulo deve conter tipo do trabalho, objetivo, nome da instituição e a
% área de concentração.
\preambulo{\lang%
    {%
        \imprimirtipotrabalho~submitted to the \imprimirprograma~of
        \imprimirinstituicao~for degree acquirement in \imprimirformacao.%
    }{%
        \imprimirtipotrabalho~submetido ao \imprimirprograma~da
        \imprimirinstituicao~para a obtenção do Grau de \imprimirformacao.%
    }%
}

% Allows you to use ~= instead of `\hyp{}`
% q/how-to-create-an-alternative-to-shortcut-or-hyp
% q/depending-on-babel-language-setting-i-get-biblatex-error-argument-of-language
% q/argument-of-languageactivearg-has-an-extra-i-use-includegraphics-and-r
\useshorthands{~}\defineshorthand{~=}{\hyp{}}

\palavraschaveufsc{palavraschaveingles}   {Keyword 1}
\palavraschaveufsc{palavraschaveportugues}{Palavra~=Chave 1}

\palavraschaveufsc{palavraschaveingles}   {Keyword 2}
\palavraschaveufsc{palavraschaveportugues}{Palavra~=Chave 2}

\palavraschaveufsc{palavraschaveingles}   {Keyword 3}
\palavraschaveufsc{palavraschaveportugues}{Palavra~=Chave 3}

\hypersetup
{
    pdfsubject={Thesis' Abstract},
    pdfcreator={LaTeX with abnTeX2 for UFSC},
    pdftitle={\imprimirtitulo},
    pdfauthor={\imprimirautor},
    pdfkeywords={\lang{\palavraschaveinglessemitem}
                {\palavraschaveportuguessemitem}},
}

% Altere 'settings.tex' para customizar aparência da sua tese
\input{settings.tex}

% When writing a large document, it is sometimes useful to work on selected
% sections of the document to speed up compilation time:
% https://en.wikibooks.org/wiki/TeX/includeonly
\newif\ifforcedinclude\forcedincludefalse

% \addtoincludeonly{agradecimentos}
% \addtoincludeonly{epigrafe}
% \addtoincludeonly{fichacatalografica}
% \addtoincludeonly{folhadeaprovacao}
% \addtoincludeonly{resumos}
% \addtoincludeonly{siglas}
% \addtoincludeonly{simbolos}

% Part 1
% \addtoincludeonly{introduction}
% \addtoincludeonly{motivation}
% \addtoincludeonly{beautifiers}

% Part 2
\addtoincludeonly{object_beautifier}
% \addtoincludeonly{conclusion}
% \addtoincludeonly{aftertext}

% Control whether the full document will be generated
% Note: It will also generate severals errors like the following, can be ignored
%       Latexmk: Missing input file: 'test.aux'
%
% You can make latex stop generate these errors, if you generate a full version
% of the document, before uncommenting these lines.
%
% Uncomment these two lines, to only partially generate the document
% \doincludeonly
% \forcedincludetrue

% q/xrightarrow-text
\makeatletter
\newcommand{\xRightarrow}[2][]{\ext@arrow 0359\Rightarrowfill@{#1}{#2}}
\newcommand{\xLeftarrow}[2][]{\ext@arrow 0359\Leftarrowfill@{#1}{#2}}
\makeatother

% q/footnote-runs-onto-second-page
\interfootnotelinepenalty=10000

% Disable the empty pages automatically put by memoir class,
% except the ones by \cleardoublepage
\ifforcedinclude\openany\else\fi

% q/overfull-hbox-in-biblatex
% q/why-my-document-is-not-hyphenation-on-words-starting-with-upper-case-letter-i
\emergencystretch=5em

% q/how-can-i-reduce-padding-after-figure
% q/how-to-keep-my-default-floating-environment-spacing-before-them-while-reducing
% \xpretocmd{\figure}{\setlength{\belowcaptionskip}{-10pt}}{}{}

\renewcommand\familydefault{\sfdefault}
\renewcommand{\sfdefault}{cmss}

% Extract only the basename (no directories, no extension)
\usepackage{xstring}

% #1 = filename (with path)
% #2 = caption
% #3 = scale (e.g., 0.35)
\newcommand{\image}[3]{%
  % Remove path
  \StrBehind{#1}{/}[\tmpA]%
  \IfEq{\tmpA}{}{\def\tmpA{#1}}{}%
  % Remove extension
  \StrBefore{\tmpA}{.}[\imglabel]%
  %
  \begin{figure}[htb]
    \centering
    \includegraphics[scale=#3]{#1}
    \caption{#2}
    \label{fig:\imglabel}
  \end{figure}
}

\begin{document}
    % FIXME: Comment this after finishing the thesis,
    %        so you can start fixing the \flushbottom vs \raggedbottom
    % q/flushbottom-vs-raggedbottom
    \raggedbottom

    % q/double-space-between-sentences
    \frenchspacing

    % Uncomment this to put a ←← | ← (Go To Top/Go Back) on each section header
    \advisor{}{\addGoToSummary}

    % ELEMENTOS PRÉ-TEXTUAIS
    \ifforcedinclude\else
        % Fix the \textpreliminarycontents not showing up when @twoside is off
        \newif\ifufscThesisXisMemoirTwoSidesEnabled

        % q/how-do-i-check-if-a-document-is-oneside-or-twoside
        \ifthenelse{\boolean{@twoside}}{%
            \ufscThesisXisMemoirTwoSidesEnabledtrue%
        }{%
            \ufscThesisXisMemoirTwoSidesEnabledfalse%
        }%
        \setboolean{@twoside}{true}

        % pretextual settings
        % q/how-to-fix-destination-with-the-same-identifier-namepage-a-has-been-already
        % q/pdftex-warning-has-been-referenced-but-does-not-exist-replaced-by-a-fixed-one
        \hypersetup{pageanchor=false}
        \PRIVATEbookmarkthis{Capa}
        \addtotextpreliminarycontent{Capa}
        \pretextual

        % Capa
        % \includepdf{fig/FrenteCapaUFSC.pdf}
        % q/blank-page-after-titlingpage
        \advisor{}{
          \AtBeginShipoutNext{\AtBeginShipoutNext{\AtBeginShipoutDiscard}}
        }
        \imprimircapa

        % q/how-to-fix-destination-with-the-same-identifier-namepage-a-has-been-already
        % q/pdftex-warning-has-been-referenced-but-does-not-exist-replaced-by-a-fixed-one
        \hypersetup{pageanchor=true}

        % Custom list throw LaTeX Error:
        % Command \mycustomfiction already defined?
        % q/custom-list-throw-latex-error-command-mycustomfiction-already-defined
        \advisor{}{%
            % Manually add the `\textpreliminarycontents` to the Table of
            % Contents here to keep the hyper link pointing to the beginning of
            % the page, instead of the beginning of `\textpreliminarycontents`
            % q/when-do-i-need-to-invoke-phantomsection
            \phantomsection\addcontentsline{toc}{chapter}
            {\mytextpreliminarylistname}

            % q/list-of-figures-and-tables-when-there-are-no-figures-or-tables
            \whenlistisnotempty{\mytextpreliminarylistname}{%
                \begin{KeepFromToc}
                    \textpreliminarycontents
                \end{KeepFromToc}
            }

            \clearpage
        }

        % Fix the \textpreliminarycontents not showing up when @twoside is off
        \ifufscThesisXisMemoirTwoSidesEnabled
            \setboolean{@twoside}{true}
        \else
            \setboolean{@twoside}{false}
        \fi

        % Folha de rosto (o * indica que haverá a ficha bibliográfica)
        % q/table-of-contents-incorrect-page-numbering
        \addtotextpreliminarycontent{\folhaderostoname}
        \imprimirfolhaderosto*{}

        % Inserir a ficha bibliografica
        %
        % Isto é um exemplo de Ficha Catalográfica,
        % ou ``Dados internacionais de % catalogação-na-publicação''.
        % Você pode utilizar este modelo como referência.  Porém, provavelmente
        % a biblioteca da sua universidade lhe fornecerá um PDF com a ficha
        % catalográfica definitiva após a defesa do trabalho. Quando estiver com
        % o documento, salve-o como PDF no diretório do seu projeto e substitua
        % todo o conteúdo de implementação deste arquivo pelo comando abaixo:
        \PRIVATEbookmarkthis{Ficha Catalográfica}
        \addtotextpreliminarycontent{Ficha Catalográfica}

        \include{03fichacatalografica.tex}
        % q/how-to-include-multiple-pages-in-latex
        % \includepdf{fig/Ficha_Catalografica.pdf}
        \ifforcedinclude\else\cleardoublepage\fi
    \fi

    % Inserir errata

    % Inserir folha de aprovação. Isto é um exemplo de Folha de aprovação,
    % elemento obrigatório da NBR 14724/2011 (seção 4.2.1.3). Você pode utilizar
    % este modelo até a aprovação do trabalho.  Após isso, substitua todo o
    % conteúdo deste arquivo por uma imagem da página assinada pela banca com o
    % comando abaixo:
    \ifforcedinclude\else\cleardoublepage\fi
    \include{04folhadeaprovacao.tex}
    % \includepdf{fig/folhadeaprovacao_final.pdf}

    % Dedicatória
    \ifforcedinclude\else\cleardoublepage\fi
    \ifforcedinclude\else\input{05dedicatoria.tex}\fi

    % Agradecimentos
    \ifforcedinclude\else\cleardoublepage\fi
    \include{06agradecimentos.tex}

    % Epígrafe
    \ifforcedinclude\else\cleardoublepage\fi
    \include{07epigrafe.tex}

    % Ajusta o espaçamento dos parágrafos do resumo
    \setlength{\absparsep}{18pt}

    % RESUMOS
    \ifforcedinclude\else\cleardoublepage\fi
    \include{08resumos.tex}

    % Some tables of contents
    \ifforcedinclude\else
    {
        % q/disable-colorlinks-locally-or-just-for-the-toc
        \hypersetup{hidelinks}

        % inserir lista de figuras
        \ifforcedinclude\else\cleardoublepage\fi
        % q/list-of-figures-and-tables-when-there-are-no-figures-or-tables
        \whenlistisnotempty{\listfigurename}{%
            \addtotextpreliminarycontent{\listfigurename}
            % q/remove-spacing-between-per-chapter-figures-in-lof
            {\renewcommand{\addvspace}[1]{}
            \listoffigures*}
        }{\pdfbookmark[0]{\listfigurename}{lof}}

        % inserir lista de quadros
        \ifforcedinclude\else\cleardoublepage\fi
        % q/list-of-figures-and-tables-when-there-are-no-figures-or-tables
        \whenlistisnotempty{\listofquadrosname}{%
            \addtotextpreliminarycontent{\listofquadrosname}
            % q/remove-spacing-between-per-chapter-figures-in-lof
            {\renewcommand{\addvspace}[1]{}
            \listofquadros*}
        }{\pdfbookmark[0]{\listofquadrosname}{loq}}

        % inserir lista de tabelas
        \ifforcedinclude\else\cleardoublepage\fi
        % q/list-of-figures-and-tables-when-there-are-no-figures-or-tables
        \whenlistisnotempty{\listtablename}{%
            \addtotextpreliminarycontent{\listtablename}
            % q/remove-spacing-between-per-chapter-figures-in-lof
            {\renewcommand{\addvspace}[1]{}
            \listoftables*}
        }{\pdfbookmark[0]{\listtablename}{lot}}

        % inserir códigos fonte (List of Listings `lol`)
        % q/latex-keeps-showing-minted-environment-as-figures-instead-of-listening/511579#511579
        \ifforcedinclude\else\cleardoublepage\fi
        % q/list-of-figures-and-tables-when-there-are-no-figures-or-tables
        \whenlistisnotempty{\lstlistlistingname}{%
            \addtotextpreliminarycontent{\lstlistlistingname}
            % q/remove-spacing-between-per-chapter-figures-in-lof
            {\renewcommand{\addvspace}[1]{}
            \lstlistoflistings*}
        }{\pdfbookmark[0]{\lstlistlistingname}{lol}}
    }
    \fi

    % inserir lista de abreviaturas e siglas
    \ifforcedinclude\else\cleardoublepage\fi
    \include{12siglas.tex}

    % Inserir lista de símbolos
    \ifforcedinclude\else\cleardoublepage\fi
    \include{14simbolos.tex}

    % How to remove the self-reference of the ToC from the ToC?
    % q/how-to-remove-the-self-reference-of-the-toc-from-the-toc
    \ifforcedinclude\else\cleardoublepage\fi

    \begin{KeepFromToc}
        % q/what-does-overfull-hbox-mean
        % q/how-to-avoid-using-sloppy-document-wide-to-fix-overfull-hbox-problems
        % q/adding-color-to-table-of-contents-and-section-headings
        {
            % q/disable-colorlinks-locally-or-just-for-the-toc
            \hypersetup{hidelinks}

            % q/underfull-vbox-badness-10000-with-memoir
            \raggedbottom

            % q/overfull-hbox-warning-for-toc-entries-when-using-memoir-documentclass
            % \makeatletter
                % \renewcommand{\@pnumwidth}{2em}
                % \renewcommand{\@tocrmarg}{3em}
            % \makeatother

            % q/memoir-mysterious-overfull-hbox-in-toc-when-mathptmx-is-used
            % \setlength{\cftchapternumwidth}{2.25em}

            % Add the table of contents to the brief table of contents
            % q/list-of-figures-and-tables-when-there-are-no-figures-or-tables
            \whenlistisnotempty{\contentsname}{%
                \addtotextpreliminarycontent{\contentsname}
                \tableofcontents
            }{\pdfbookmark[0]{\contentsname}{toc}}
        }

    \end{KeepFromToc}

    % ELEMENTOS TEXTUAIS
    \textual
    \setlength\beforechapskip{50pt}
    \setlength\midchapskip{20pt}
    \setlength\afterchapskip{20pt}

    % PARTE
    \ifforcedinclude\else\part{\lang{Research}{Pesquisa}}\fi
    \label{primeira_parte}

    % Introdução (exemplo de capítulo sem numeração, mas presente no Sumário)
    \include{15intro.tex}

    % Capitulo com exemplos de comandos inseridos de arquivo externo
    \include{15chapter_1.tex}

    % Capitulo de revisão de literatura
    \include{15chapter_2.tex}

    % Primeiro capitulo de Resultados
    \include{15chapter_3.tex}

    % PARTE
    \ifforcedinclude\else\part{\lang{Implementation}{Implementação}}\fi
    \label{segunda_parte}

    % Segundo capitulo de Resultados
    \include{15chapter_4.tex}

    % Finaliza a parte no bookmark do PDF para que se inicie o bookmark na raiz
    % e adiciona espaço de parte no Sumário
    \phantompart

    % Conclusão (outro exemplo de capítulo sem numeração e presente no sumário)
    \include{15conclusion.tex}

    % ELEMENTOS PÓS-TEXTUAIS
    \postextual
    \setlength\beforechapskip{0pt}
    \setlength\midchapskip{15pt}
    \setlength\afterchapskip{15pt}

    % Referências bibliográficas
    \begingroup
        % q/how-to-modify-line-spacing-per-entry-of-bibliography
        % q/how-can-i-put-more-space-between-bibliography-entries-biblatex
        \setlength\bibitemsep{\baselineskip}
        \advisor{}{\linespread{1.18}\selectfont}

        % q/using-bibtex-to-make-a-list-of-references-without-having-citations-in-the-body
        % \nocite{*}
        \printbibliography[title=\lang{REFERENCES}{REFERÊNCIAS}]
    \endgroup

    % Glossário, consulte o manual da classe abntex2
    % \ifforcedinclude\else\glossary\fi

    % Inicia os apêndices
    \begin{apendicesenv}
        % Imprime uma página indicando o início dos apêndices
        \ifforcedinclude\else\partapendices\fi
        \setlength\beforechapskip{50pt}
        \setlength\midchapskip{20pt}
        \setlength\afterchapskip{20pt}

        \include{18apendice_a.tex}
    \end{apendicesenv}

    % Inicia os anexos
    \begin{anexosenv}
        % Imprime uma página indicando o início dos anexos
        \ifforcedinclude\else\partanexos\fi
        \setlength\beforechapskip{50pt}
        \setlength\midchapskip{20pt}
        \setlength\afterchapskip{20pt}

        \include{19anexo_a.tex}
        \include{19anexo_b.tex}
    \end{anexosenv}

    % INDICE REMISSIVO
    \ifforcedinclude\else
        \phantompart
        \printindex
    \fi

\end{document}
